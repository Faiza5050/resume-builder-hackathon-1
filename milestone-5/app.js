document.addEventListener("DOMContentLoaded", function () {
    var generateButton = document.getElementById("generateResume");
    generateButton.addEventListener("click", function () {
        var username = document.getElementById("username").value;
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phone").value;
        var education = document.getElementById("education").value.split(',').map(function (e) { return e.trim(); });
        var experience = document.getElementById("experience").value.split(',').map(function (e) { return e.trim(); });
        var skills = document.getElementById("skills").value.split(',').map(function (e) { return e.trim(); });
        var resumeContent = "\n        <html>\n            <head>\n                <title>Shareable Resume Builder</title>\n                <style>\n                    body {\n                        font-family: 'Arial', sans-serif;\n                        background-color: #f4f7f6;\n                        color: #333;\n                        line-height: 1.6;\n                        padding: 20px;\n                        border: 25px double;\n                        width: 50%;\n                        margin-left: 300px;\n                        justify-content: center;\n                    }\n                    h1 {\n                        text-align: center;\n                        font-size: 40px;\n                        margin-bottom: 20px;\n                        color: #333;\n                        width: 100%;\n                        border-radius: 10px;\n                        background-color: rgb(209, 200, 200);\n                    }\n                    h2 {\n                        font-size: 35px;\n                        background-color: #444;\n                        margin-bottom: 20px;\n                        border-radius: 8px;\n                        color: #333;\n                        color: white;\n                        width: 60%;\n                        padding-left: 10px;\n                    }\n                    .resume-section {\n                        margin-bottom: 20px;\n                    }\n                    .resume-section h3 {\n                        margin-top: 0;\n                    }\n                    li {\n                        margin: 5px 0;\n                    }\n                    legend {\n                        box-shadow: 5px 5px 5px 5px;\n                        border-radius: 5px;\n                        padding: 10px 3px 10px 3px;\n                        background-color: #918583;\n                        font-weight: bold;\n                        font-size: 25px;\n                    }\n                    p {\n                        padding: 10px;\n                        font-size: 16px;\n                        border: 1px solid #cf9898;\n                        border-radius: 10px;\n                        outline: none;\n                        transition: border 0.3s ease;\n                        padding-left: 10px;\n                        width: 95%;\n                        background-color: rgb(209, 200, 200);\n                    }\n                    #downloadPdfBtn {\n                        background-color: #ff6347;\n                        color: #fff;\n                        font-size: 25px;\n                        padding: 10px;\n                        border: none;\n                        border-radius: 10px;\n                        cursor: pointer;\n                        transition: background-color 0.3s ease;\n                        align-self: center;\n                        margin-bottom: 10px;\n                    }\n                    #downloadPdfBtn:hover {\n                        background-color: #e53e2f;\n                    }\n                    strong {\n                        font-weight: bold;\n                        font-size: 30px;\n                    }\n\n                    @media (max-width: 320px) {\n                        body {\n                            width: 100%;\n                            margin-left: 0;\n                            padding: 5px;\n                        }\n                        h1 {\n                            font-size: 20px;\n                        }\n                        h4 {\n                            font-size: 18px;\n                        }\n                        label {\n                            font-size: 12px;\n                        }\n                        input, textarea {\n                            font-size: 12px;\n                            padding-left: 10px;\n                        }\n                        button {\n                            font-size: 14px;\n                            padding: 8px;\n                        }\n                        #downloadPdfBtn {\n                            font-size: 14px;\n                            padding: 8px;\n                        }\n                        legend {\n                            font-size: 18px;\n                        }\n                        h2 {\n                            font-size: 22px;\n                        }\n                        .resume-section {\n                            margin-bottom: 10px;\n                        }\n                    }\n\n                    @media (max-width: 768px) {\n                        body {\n                            margin-left: 0;\n                            width: 100%;\n                            border: none;\n                        }\n                        h1 {\n                            font-size: 28px;\n                        }\n                        h4 {\n                            font-size: 24px;\n                        }\n                        label {\n                            font-size: 14px;\n                        }\n                        input, textarea {\n                            font-size: 14px;\n                            padding-left: 12px;\n                        }\n                        button {\n                            font-size: 16px;\n                            width: 100%;\n                            padding: 10px;\n                        }\n                        #downloadPdfBtn {\n                            font-size: 16px;\n                            width: 100%;\n                            padding: 10px;\n                        }\n                        legend {\n                            font-size: 22px;\n                        }\n                        h2 {\n                            font-size: 28px;\n                        }\n                        .resume-section {\n                            margin-bottom: 15px;\n                        }\n                    }\n\n                </style>\n            </head>\n            <body>\n                <h1><u>~ Shareable Resume ~</u></h1>\n\n                <div class=\"resume-section\">\n                    <h2>Personal Information</h2>\n                    <legend>\n                        <p contenteditable=\"true\"><strong>Name:</strong> ".concat(name, "</p>\n                        <p contenteditable=\"true\"><strong>Email:</strong> ").concat(email, "</p>\n                        <p contenteditable=\"true\"><strong>Phone:</strong> ").concat(phone, "</p>\n                    </legend>\n                </div>\n\n                <div class=\"resume-section\">\n                    <h2>Education</h2>\n                    <legend>\n                        ").concat(education.map(function (degree) { return "<p contenteditable=\"true\">".concat(degree, "</p>"); }).join(''), "\n                    </legend>\n                </div>\n\n                <div class=\"resume-section\">\n                    <h2>Work Experience</h2>\n                    <legend>\n                        ").concat(experience.map(function (job) { return "<p contenteditable=\"true\">".concat(job, "</p>"); }).join(''), "\n                    </legend>\n                </div>\n\n                <div class=\"resume-section\">\n                    <h2>Skills</h2>\n                    <legend>\n                        ").concat(skills.map(function (skill) { return "<p contenteditable=\"true\">".concat(skill, "</p>"); }).join(''), "\n                    </legend>\n                </div>\n\n                <div style=\"text-align:center; margin-top: 30px;\">\n                    <button id=\"downloadPdfBtn\"><b>Download PDF</b></button><br>\n                    <a href=\"#\" id=\"shareableLink\" target=\"_blank\"><button>Get Shareable Link</button></a>\n                </div>\n\n                <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\"></script>\n            </body>\n        </html>\n        ");
        localStorage.setItem('resumeContent', resumeContent);
        var newWindow = window.open('', '_blank');
        if (newWindow) {
            newWindow.document.write(resumeContent);
            newWindow.document.close();
            var downloadBtn = newWindow.document.getElementById("downloadPdfBtn");
            if (downloadBtn) {
                downloadBtn.addEventListener("click", function () {
                    var options = {
                        filename: "".concat(username, "_resume.pdf"),
                        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
                    };
                    newWindow.html2pdf().from(newWindow.document.body).set(options).save();
                });
            }
            ;
            var shareLink = newWindow.document.getElementById("shareableLink");
            if (shareLink) {
                var shareableUrl = window.location.href + "?resume=".concat(username);
                shareLink.href = shareableUrl;
                shareLink.textContent = "Share Your Resume: ".concat(shareableUrl);
            }
        }
        else {
            alert("Popup blocked! Please enable popups in your browser.");
        }
        ;
    });
});
var params = new URLSearchParams(window.location.search);
if (params.has('resume')) {
    var resumeContent = localStorage.getItem('resumeContent');
    if (resumeContent) {
        document.body.innerHTML = resumeContent;
    }
    ;
}
;
